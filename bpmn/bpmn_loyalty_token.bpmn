<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.41.0">
  <bpmn:process id="RegisterCustomer" name="Đăng ký Khách hàng" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Register" name="Bắt đầu đăng ký">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_CheckOwner" name="Kiểm tra quyền Owner">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_IsOwner" name="Là Owner?">
      <bpmn:incoming>Flow_2</bpmn:incoming>
      <bpmn:outgoing>Flow_Yes_Owner</bpmn:outgoing>
      <bpmn:outgoing>Flow_No_Owner</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_NotOwner" name="Không có quyền">
      <bpmn:incoming>Flow_No_Owner</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_CheckAlreadyRegistered" name="Kiểm tra đã đăng ký">
      <bpmn:incoming>Flow_Yes_Owner</bpmn:incoming>
      <bpmn:outgoing>Flow_3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_AlreadyRegistered" name="Đã đăng ký?">
      <bpmn:incoming>Flow_3</bpmn:incoming>
      <bpmn:outgoing>Flow_Yes_Registered</bpmn:outgoing>
      <bpmn:outgoing>Flow_No_Registered</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_AlreadyRegistered" name="Đã đăng ký rồi">
      <bpmn:incoming>Flow_Yes_Registered</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_RegisterOnChain" name="Ghi nhận đăng ký trên Blockchain (registerCustomer)">
      <bpmn:incoming>Flow_No_Registered</bpmn:incoming>
      <bpmn:outgoing>Flow_4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="Event_CustomerRegistered" name="Sự kiện: CustomerRegistered">
      <bpmn:incoming>Flow_4</bpmn:incoming>
      <bpmn:outgoing>Flow_5</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="EndEvent_RegisterComplete" name="Đăng ký thành công">
      <bpmn:incoming>Flow_5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_Register" targetRef="Task_CheckOwner" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_CheckOwner" targetRef="Gateway_IsOwner" />
    <bpmn:sequenceFlow id="Flow_Yes_Owner" name="Là Owner" sourceRef="Gateway_IsOwner" targetRef="Task_CheckAlreadyRegistered" />
    <bpmn:sequenceFlow id="Flow_No_Owner" name="Không phải Owner" sourceRef="Gateway_IsOwner" targetRef="EndEvent_NotOwner" />
    <bpmn:sequenceFlow id="Flow_3" sourceRef="Task_CheckAlreadyRegistered" targetRef="Gateway_AlreadyRegistered" />
    <bpmn:sequenceFlow id="Flow_Yes_Registered" name="Đã đăng ký" sourceRef="Gateway_AlreadyRegistered" targetRef="EndEvent_AlreadyRegistered" />
    <bpmn:sequenceFlow id="Flow_No_Registered" name="Chưa đăng ký" sourceRef="Gateway_AlreadyRegistered" targetRef="Task_RegisterOnChain" />
    <bpmn:sequenceFlow id="Flow_4" sourceRef="Task_RegisterOnChain" targetRef="Event_CustomerRegistered" />
    <bpmn:sequenceFlow id="Flow_5" sourceRef="Event_CustomerRegistered" targetRef="EndEvent_RegisterComplete" />
  </bpmn:process>
  <bpmn:process id="IssueTokens" name="Phát hành Token Thưởng" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Issue" name="Bắt đầu phát hành token">
      <bpmn:outgoing>Flow_I1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_CheckOwner_Issue" name="Kiểm tra quyền Owner">
      <bpmn:incoming>Flow_I1</bpmn:incoming>
      <bpmn:outgoing>Flow_I2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_IsOwner_Issue" name="Là Owner?">
      <bpmn:incoming>Flow_I2</bpmn:incoming>
      <bpmn:outgoing>Flow_Yes_Owner_Issue</bpmn:outgoing>
      <bpmn:outgoing>Flow_No_Owner_Issue</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_NotOwner_Issue" name="Không có quyền">
      <bpmn:incoming>Flow_No_Owner_Issue</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_CheckCustomerRegistered" name="Kiểm tra khách hàng đã đăng ký">
      <bpmn:incoming>Flow_Yes_Owner_Issue</bpmn:incoming>
      <bpmn:outgoing>Flow_I3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_CustomerRegistered" name="Khách hàng đã đăng ký?">
      <bpmn:incoming>Flow_I3</bpmn:incoming>
      <bpmn:outgoing>Flow_Yes_Customer</bpmn:outgoing>
      <bpmn:outgoing>Flow_No_Customer</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_CustomerNotRegistered" name="Khách hàng chưa đăng ký">
      <bpmn:incoming>Flow_No_Customer</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_IssueTokensOnChain" name="Phát hành Token trên Blockchain (issueTokens)">
      <bpmn:incoming>Flow_Yes_Customer</bpmn:incoming>
      <bpmn:outgoing>Flow_I4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_MintTokens" name="Mint Token (mint)">
      <bpmn:incoming>Flow_I4</bpmn:incoming>
      <bpmn:outgoing>Flow_I5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="Event_TokensMinted" name="Sự kiện: Transfer (mint)">
      <bpmn:incoming>Flow_I5</bpmn:incoming>
      <bpmn:outgoing>Flow_I6</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="EndEvent_TokensIssued" name="Phát hành token thành công">
      <bpmn:incoming>Flow_I6</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_I1" sourceRef="StartEvent_Issue" targetRef="Task_CheckOwner_Issue" />
    <bpmn:sequenceFlow id="Flow_I2" sourceRef="Task_CheckOwner_Issue" targetRef="Gateway_IsOwner_Issue" />
    <bpmn:sequenceFlow id="Flow_Yes_Owner_Issue" name="Là Owner" sourceRef="Gateway_IsOwner_Issue" targetRef="Task_CheckCustomerRegistered" />
    <bpmn:sequenceFlow id="Flow_No_Owner_Issue" name="Không phải Owner" sourceRef="Gateway_IsOwner_Issue" targetRef="EndEvent_NotOwner_Issue" />
    <bpmn:sequenceFlow id="Flow_I3" sourceRef="Task_CheckCustomerRegistered" targetRef="Gateway_CustomerRegistered" />
    <bpmn:sequenceFlow id="Flow_Yes_Customer" name="Đã đăng ký" sourceRef="Gateway_CustomerRegistered" targetRef="Task_IssueTokensOnChain" />
    <bpmn:sequenceFlow id="Flow_No_Customer" name="Chưa đăng ký" sourceRef="Gateway_CustomerRegistered" targetRef="EndEvent_CustomerNotRegistered" />
    <bpmn:sequenceFlow id="Flow_I4" sourceRef="Task_IssueTokensOnChain" targetRef="Task_MintTokens" />
    <bpmn:sequenceFlow id="Flow_I5" sourceRef="Task_MintTokens" targetRef="Event_TokensMinted" />
    <bpmn:sequenceFlow id="Flow_I6" sourceRef="Event_TokensMinted" targetRef="EndEvent_TokensIssued" />
  </bpmn:process>
  <bpmn:process id="RedeemReward" name="Đổi Thưởng" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Redeem" name="Khách hàng muốn đổi thưởng">
      <bpmn:outgoing>Flow_R1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Task_SelectReward" name="Chọn phần thưởng">
      <bpmn:incoming>Flow_R1</bpmn:incoming>
      <bpmn:outgoing>Flow_R2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Task_CheckRewardValid" name="Kiểm tra reward hợp lệ">
      <bpmn:incoming>Flow_R2</bpmn:incoming>
      <bpmn:outgoing>Flow_R3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_RewardValid" name="Reward hợp lệ?">
      <bpmn:incoming>Flow_R3</bpmn:incoming>
      <bpmn:outgoing>Flow_Valid</bpmn:outgoing>
      <bpmn:outgoing>Flow_Invalid</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_InvalidReward" name="Reward không hợp lệ">
      <bpmn:incoming>Flow_Invalid</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_CheckBalance" name="Kiểm tra số dư token">
      <bpmn:incoming>Flow_Valid</bpmn:incoming>
      <bpmn:outgoing>Flow_R4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_SufficientBalance" name="Đủ token?">
      <bpmn:incoming>Flow_R4</bpmn:incoming>
      <bpmn:outgoing>Flow_Enough</bpmn:outgoing>
      <bpmn:outgoing>Flow_NotEnough</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_Insufficient" name="Không đủ token">
      <bpmn:incoming>Flow_NotEnough</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_CheckAllowance" name="Kiểm tra allowance">
      <bpmn:incoming>Flow_Enough</bpmn:incoming>
      <bpmn:outgoing>Flow_R5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_SufficientAllowance" name="Đủ allowance?">
      <bpmn:incoming>Flow_R5</bpmn:incoming>
      <bpmn:outgoing>Flow_AllowanceOK</bpmn:outgoing>
      <bpmn:outgoing>Flow_NeedApprove</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Task_ApproveTokens" name="Phê duyệt token cho contract">
      <bpmn:incoming>Flow_NeedApprove</bpmn:incoming>
      <bpmn:outgoing>Flow_R6</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Task_ExecuteRedeem" name="Thực hiện đổi thưởng trên Blockchain (redeemReward)">
      <bpmn:incoming>Flow_AllowanceOK</bpmn:incoming>
      <bpmn:incoming>Flow_R6</bpmn:incoming>
      <bpmn:outgoing>Flow_R7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_TransferFrom" name="Chuyển token từ khách hàng (transferFrom)">
      <bpmn:incoming>Flow_R7</bpmn:incoming>
      <bpmn:outgoing>Flow_R8</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="Event_RewardRedeemed" name="Sự kiện: RewardRedeemed">
      <bpmn:incoming>Flow_R8</bpmn:incoming>
      <bpmn:outgoing>Flow_R9</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="EndEvent_RedeemComplete" name="Đổi thưởng thành công">
      <bpmn:incoming>Flow_R9</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_R1" sourceRef="StartEvent_Redeem" targetRef="Task_SelectReward" />
    <bpmn:sequenceFlow id="Flow_R2" sourceRef="Task_SelectReward" targetRef="Task_CheckRewardValid" />
    <bpmn:sequenceFlow id="Flow_R3" sourceRef="Task_CheckRewardValid" targetRef="Gateway_RewardValid" />
    <bpmn:sequenceFlow id="Flow_Valid" name="Hợp lệ" sourceRef="Gateway_RewardValid" targetRef="Task_CheckBalance" />
    <bpmn:sequenceFlow id="Flow_Invalid" name="Không hợp lệ" sourceRef="Gateway_RewardValid" targetRef="EndEvent_InvalidReward" />
    <bpmn:sequenceFlow id="Flow_R4" sourceRef="Task_CheckBalance" targetRef="Gateway_SufficientBalance" />
    <bpmn:sequenceFlow id="Flow_Enough" name="Đủ" sourceRef="Gateway_SufficientBalance" targetRef="Task_CheckAllowance" />
    <bpmn:sequenceFlow id="Flow_NotEnough" name="Không đủ" sourceRef="Gateway_SufficientBalance" targetRef="EndEvent_Insufficient" />
    <bpmn:sequenceFlow id="Flow_R5" sourceRef="Task_CheckAllowance" targetRef="Gateway_SufficientAllowance" />
    <bpmn:sequenceFlow id="Flow_AllowanceOK" name="Đủ allowance" sourceRef="Gateway_SufficientAllowance" targetRef="Task_ExecuteRedeem" />
    <bpmn:sequenceFlow id="Flow_NeedApprove" name="Cần phê duyệt" sourceRef="Gateway_SufficientAllowance" targetRef="Task_ApproveTokens" />
    <bpmn:sequenceFlow id="Flow_R6" sourceRef="Task_ApproveTokens" targetRef="Task_ExecuteRedeem" />
    <bpmn:sequenceFlow id="Flow_R7" sourceRef="Task_ExecuteRedeem" targetRef="Task_TransferFrom" />
    <bpmn:sequenceFlow id="Flow_R8" sourceRef="Task_TransferFrom" targetRef="Event_RewardRedeemed" />
    <bpmn:sequenceFlow id="Flow_R9" sourceRef="Event_RewardRedeemed" targetRef="EndEvent_RedeemComplete" />
  </bpmn:process>
  <bpmn:process id="CheckCustomerRegistration" name="Truy xuất Dữ liệu - Kiểm tra Khách hàng" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Check" name="Yêu cầu kiểm tra khách hàng">
      <bpmn:outgoing>Flow_C1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_QueryRegistration" name="Truy vấn dữ liệu trên Blockchain (isCustomerRegistered)">
      <bpmn:incoming>Flow_C1</bpmn:incoming>
      <bpmn:outgoing>Flow_C2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_IsRegistered" name="Đã đăng ký?">
      <bpmn:incoming>Flow_C2</bpmn:incoming>
      <bpmn:outgoing>Flow_Yes_Check</bpmn:outgoing>
      <bpmn:outgoing>Flow_No_Check</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_Registered" name="Đã đăng ký">
      <bpmn:incoming>Flow_Yes_Check</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="EndEvent_NotRegistered" name="Chưa đăng ký">
      <bpmn:incoming>Flow_No_Check</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_C1" sourceRef="StartEvent_Check" targetRef="Task_QueryRegistration" />
    <bpmn:sequenceFlow id="Flow_C2" sourceRef="Task_QueryRegistration" targetRef="Gateway_IsRegistered" />
    <bpmn:sequenceFlow id="Flow_Yes_Check" name="Đã đăng ký" sourceRef="Gateway_IsRegistered" targetRef="EndEvent_Registered" />
    <bpmn:sequenceFlow id="Flow_No_Check" name="Chưa đăng ký" sourceRef="Gateway_IsRegistered" targetRef="EndEvent_NotRegistered" />
  </bpmn:process>
  <bpmn:process id="TransferTokens" name="Chuyển Token" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Transfer" name="Yêu cầu chuyển token">
      <bpmn:outgoing>Flow_T1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_CheckBalance_Transfer" name="Kiểm tra số dư token">
      <bpmn:incoming>Flow_T1</bpmn:incoming>
      <bpmn:outgoing>Flow_T2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_SufficientBalance_Transfer" name="Đủ token?">
      <bpmn:incoming>Flow_T2</bpmn:incoming>
      <bpmn:outgoing>Flow_Enough_Transfer</bpmn:outgoing>
      <bpmn:outgoing>Flow_NotEnough_Transfer</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_Insufficient_Transfer" name="Không đủ token">
      <bpmn:incoming>Flow_NotEnough_Transfer</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_TransferOnChain" name="Chuyển token trên Blockchain (transfer)">
      <bpmn:incoming>Flow_Enough_Transfer</bpmn:incoming>
      <bpmn:outgoing>Flow_T3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="Event_Transfer" name="Sự kiện: Transfer">
      <bpmn:incoming>Flow_T3</bpmn:incoming>
      <bpmn:outgoing>Flow_T4</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="EndEvent_TransferComplete" name="Chuyển token thành công">
      <bpmn:incoming>Flow_T4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_T1" sourceRef="StartEvent_Transfer" targetRef="Task_CheckBalance_Transfer" />
    <bpmn:sequenceFlow id="Flow_T2" sourceRef="Task_CheckBalance_Transfer" targetRef="Gateway_SufficientBalance_Transfer" />
    <bpmn:sequenceFlow id="Flow_Enough_Transfer" name="Đủ" sourceRef="Gateway_SufficientBalance_Transfer" targetRef="Task_TransferOnChain" />
    <bpmn:sequenceFlow id="Flow_NotEnough_Transfer" name="Không đủ" sourceRef="Gateway_SufficientBalance_Transfer" targetRef="EndEvent_Insufficient_Transfer" />
    <bpmn:sequenceFlow id="Flow_T3" sourceRef="Task_TransferOnChain" targetRef="Event_Transfer" />
    <bpmn:sequenceFlow id="Flow_T4" sourceRef="Event_Transfer" targetRef="EndEvent_TransferComplete" />
  </bpmn:process>
  <bpmn:process id="TransferFromTokens" name="Chuyển Token từ Người khác" isExecutable="true">
    <bpmn:startEvent id="StartEvent_TransferFrom" name="Yêu cầu chuyển token từ người khác">
      <bpmn:outgoing>Flow_TF1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_CheckAllowance_TransferFrom" name="Kiểm tra allowance">
      <bpmn:incoming>Flow_TF1</bpmn:incoming>
      <bpmn:outgoing>Flow_TF2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_SufficientAllowance_TransferFrom" name="Đủ allowance?">
      <bpmn:incoming>Flow_TF2</bpmn:incoming>
      <bpmn:outgoing>Flow_Enough_Allowance</bpmn:outgoing>
      <bpmn:outgoing>Flow_NotEnough_Allowance</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_Insufficient_Allowance" name="Không đủ allowance">
      <bpmn:incoming>Flow_NotEnough_Allowance</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_CheckBalance_TransferFrom" name="Kiểm tra số dư của người gửi">
      <bpmn:incoming>Flow_Enough_Allowance</bpmn:incoming>
      <bpmn:outgoing>Flow_TF3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_SufficientBalance_TransferFrom" name="Đủ số dư?">
      <bpmn:incoming>Flow_TF3</bpmn:incoming>
      <bpmn:outgoing>Flow_Enough_Balance</bpmn:outgoing>
      <bpmn:outgoing>Flow_NotEnough_Balance</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_Insufficient_Balance" name="Không đủ số dư">
      <bpmn:incoming>Flow_NotEnough_Balance</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Task_TransferFromOnChain" name="Chuyển token trên Blockchain (transferFrom)">
      <bpmn:incoming>Flow_Enough_Balance</bpmn:incoming>
      <bpmn:outgoing>Flow_05uspxn</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateThrowEvent id="Event_TransferFrom" name="Sự kiện: Transfer">
      <bpmn:incoming>Flow_05uspxn</bpmn:incoming>
      <bpmn:outgoing>Flow_TF5</bpmn:outgoing>
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="EndEvent_TransferFromComplete" name="Chuyển token thành công">
      <bpmn:incoming>Flow_TF5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_TF1" sourceRef="StartEvent_TransferFrom" targetRef="Task_CheckAllowance_TransferFrom" />
    <bpmn:sequenceFlow id="Flow_TF2" sourceRef="Task_CheckAllowance_TransferFrom" targetRef="Gateway_SufficientAllowance_TransferFrom" />
    <bpmn:sequenceFlow id="Flow_Enough_Allowance" name="Đủ allowance" sourceRef="Gateway_SufficientAllowance_TransferFrom" targetRef="Task_CheckBalance_TransferFrom" />
    <bpmn:sequenceFlow id="Flow_NotEnough_Allowance" name="Không đủ allowance" sourceRef="Gateway_SufficientAllowance_TransferFrom" targetRef="EndEvent_Insufficient_Allowance" />
    <bpmn:sequenceFlow id="Flow_TF3" sourceRef="Task_CheckBalance_TransferFrom" targetRef="Gateway_SufficientBalance_TransferFrom" />
    <bpmn:sequenceFlow id="Flow_Enough_Balance" name="Đủ số dư" sourceRef="Gateway_SufficientBalance_TransferFrom" targetRef="Task_TransferFromOnChain" />
    <bpmn:sequenceFlow id="Flow_NotEnough_Balance" name="Không đủ số dư" sourceRef="Gateway_SufficientBalance_TransferFrom" targetRef="EndEvent_Insufficient_Balance" />
    <bpmn:sequenceFlow id="Flow_TF5" sourceRef="Event_TransferFrom" targetRef="EndEvent_TransferFromComplete" />
    <bpmn:sequenceFlow id="Flow_05uspxn" sourceRef="Task_TransferFromOnChain" targetRef="Event_TransferFrom" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_6" bpmnElement="TransferFromTokens">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_TransferFrom" bpmnElement="StartEvent_TransferFrom">
        <dc:Bounds x="180" y="110" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="159" y="153" width="79" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Task_CheckAllowance_TransferFrom" bpmnElement="Task_CheckAllowance_TransferFrom">
        <dc:Bounds x="260" y="88" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Gateway_SufficientAllowance_TransferFrom" bpmnElement="Gateway_SufficientAllowance_TransferFrom" isMarkerVisible="true">
        <dc:Bounds x="400" y="103" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="388" y="79" width="73" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Task_CheckBalance_TransferFrom" bpmnElement="Task_CheckBalance_TransferFrom">
        <dc:Bounds x="530" y="88" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_Insufficient_Allowance" bpmnElement="EndEvent_Insufficient_Allowance">
        <dc:Bounds x="407" y="222" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="401" y="265" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Task_TransferFromOnChain" bpmnElement="Task_TransferFromOnChain">
        <dc:Bounds x="780" y="88" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Gateway_SufficientBalance_TransferFrom" bpmnElement="Gateway_SufficientBalance_TransferFrom" isMarkerVisible="true">
        <dc:Bounds x="675" y="103" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="674" y="79" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_Insufficient_Balance" bpmnElement="EndEvent_Insufficient_Balance">
        <dc:Bounds x="682" y="222" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="661" y="265" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_Event_TransferFrom" bpmnElement="Event_TransferFrom">
        <dc:Bounds x="932" y="110" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="908" y="153" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_TransferFromComplete" bpmnElement="EndEvent_TransferFromComplete">
        <dc:Bounds x="1022" y="110" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1006" y="153" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_TF1_di" bpmnElement="Flow_TF1">
        <di:waypoint x="216" y="128" />
        <di:waypoint x="260" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_TF2_di" bpmnElement="Flow_TF2">
        <di:waypoint x="360" y="128" />
        <di:waypoint x="400" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Enough_Allowance_di" bpmnElement="Flow_Enough_Allowance">
        <di:waypoint x="450" y="128" />
        <di:waypoint x="530" y="128" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="456" y="110" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_NotEnough_Allowance_di" bpmnElement="Flow_NotEnough_Allowance">
        <di:waypoint x="425" y="153" />
        <di:waypoint x="425" y="222" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="365" y="173" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_TF3_di" bpmnElement="Flow_TF3">
        <di:waypoint x="630" y="128" />
        <di:waypoint x="675" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Enough_Balance_di" bpmnElement="Flow_Enough_Balance">
        <di:waypoint x="725" y="128" />
        <di:waypoint x="780" y="128" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="726.9999999999999" y="111" width="46" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_NotEnough_Balance_di" bpmnElement="Flow_NotEnough_Balance">
        <di:waypoint x="700" y="153" />
        <di:waypoint x="700" y="222" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="610" y="184" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_TF5_di" bpmnElement="Flow_TF5">
        <di:waypoint x="968" y="128" />
        <di:waypoint x="1022" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05uspxn_di" bpmnElement="Flow_05uspxn">
        <di:waypoint x="880" y="128" />
        <di:waypoint x="932" y="128" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
